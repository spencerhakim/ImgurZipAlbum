location.hostname==="imgur.com"?function(a){var b=function(b){function c(){setTimeout(function(b){return function(){var c=a(b).data("imgur-id"),d=atob(e(b));b.onerror=b.onload=function(){},b.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",q.file(c+i.filetype,d,{base64:!1,binary:!0}),console.log(h("Succesful: %1, %2kB",c,(d.length/1024).toFixed(2))),g()}}(this),i.timeout)}function e(a){return d.width=a.width,d.height=a.height,d.getContext("2d").drawImage(a,0,0),d.toDataURL(j,.95).replace(/^data:image\/(png|jpg|jpeg);base64,/,"")}function f(){setTimeout(function(b){return function(){var c=a(b).data("imgur-id");o=a(o).not([c]).get(),p.push(c),console.log("Failed: "+c);var d={};(d=a("#IZAerrors")).length===0&&(a(window.body).append(a(m)),d=a("#IZAerrors")),d.append(h('<li><a href="http://imgur.com/download/%1">%1</a></li>',c)),a(h("[id=%1] img",c)).css("outline","3px solid red"),a(h("img[id=thumb-%1]",c)).css("border","3px solid red"),g()}}(this),i.timeout)}function g(){var a=Object.keys(q.files).length;r.html(h(k,a,o.length)),a===o.length&&(console.log("Generating zip..."),r.html("Generating zip..."),r=r.closest(".panel"),r.downloadify({filename:n+".zip",data:function(){return q.generate()},dataType:"base64",onError:function(){alert("An error occurred, sorry!")},onComplete:function(){r.remove(),r=undefined,window.onbeforeunload=function(){}},swf:i.baseurl+"media/downloadify.swf",downloadImage:i.baseurl+"media/download.png",width:84,height:25,transparent:!0}))}function h(a){for(var b=1,c=arguments.length;b<c;b++)a=a.replace(RegExp("%"+b,"g"),arguments[b]);return a}var d=document.createElement("canvas");b||(b={});var i={baseurl:"http://spencerhakim.github.com/ImgurZipAlbum/",filetype:".jpg",timeout:50};i=a.extend(i,b);var j=i.filetype===".jpg"?"image/jpeg":"image/png",k='<span class="stat">%1</span> of <span class="stat">%2</span> images downloaded...',l='<div class="panel" style="display:inline-block; position:fixed; bottom:0; padding:10px; z-index:1000"><div class="textbox"><img src="'+i.baseurl+'media/loader.gif" style="vertical-align:text-bottom" /> <span id="IZAstatus"></span>'+"</div>"+"</div>",m='<div class="panel" style="display:inline-block; position:fixed; bottom:0; right:0; padding:10px; z-index:1000; overflow-y:auto; max-height:'+a(window).height()*.95+'px">'+'<div class="textbox">'+'<span style="font-weight:bold; color:red">Failed images</span>'+'<ul id="IZAerrors" style="list-style-position:inside"></ul>'+"</div>"+"</div>",n=function(){var b=a("div[id^=album-].nodisplay").attr("id").split("-")[1],c=a("div[id^=album-].nodisplay").data("title");return h("%1%2",b,c.length>0?" - "+c:"")}(),o=a(".jcarousel ul li img").map(function(){return this.id.split("-")[1]}).get(),p=[],q=new JSZip;console.log("Album name = "+n),console.log("Image IDs  = "+o);if(o.length===0){alert("This album appears to be empty...");return}a(window.body).append(a(l));var r=a("#IZAstatus");r.html(h(k,0,o.length)),window.onbeforeunload=function(){return};for(var s=0,t=o.length;s<t;s++){var u=new Image;a(u).load(c).error(f).data("imgur-id",o[s]).attr("src","http://imgur.com/download/"+o[s])}};if(a("div[id^=album-].nodisplay").length===0){alert("Hey, this isn't an album!");return}a.ajaxSetup({cache:!0});if(!window.atob||!window.btoa)a.ajaxSetup({async:!1}),a.getScript("http://stringencoders.googlecode.com/svn/trunk/javascript/base64.js",function(){window.atob||(window.btoa=base64.encode),window.atob||(window.atob=base64.decode)}),a.ajaxSetup({async:!0});a.getScript("http://spencerhakim.github.com/ImgurZipAlbum/js/jszip.js",function(){a.getScript("http://spencerhakim.github.com/ImgurZipAlbum/js/swfobject.js",function(){a.getScript("http://spencerhakim.github.com/ImgurZipAlbum/js/downloadify.min.js",function(){b()})})})}(jQuery):location.href="http://spencerhakim.github.com/ImgurZipAlbum/";